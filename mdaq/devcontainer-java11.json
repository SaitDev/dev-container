{
  "name": "mdaq-intellij-java",
  "image": "java11-fortivpn:latest",
  "remoteUser": "dev",
  "updateRemoteUserUID": false,
  "mounts": [
    "type=volume,source=mdaq-maven,target=/home/dev/.m2", 
    "type=volume,source=mdaq-gradle,target=/home/dev/.gradle",
    "type=bind,source=${localWorkspaceFolder}/../ssh/mdaq,target=/home/dev/.ssh/shared/mdaq,readonly",
    "type=bind,source=${localWorkspaceFolder}/../ssh/config,target=/home/dev/.ssh/shared/config,readonly",
    "type=volume,source=dind-runtime,target=/var/run/dind"
  ],
  "runArgs": [
    "--name", "mdaq-intellij-java",
    "--network", "dev-dind",
    "--env-file", "${localWorkspaceFolder}/.devcontainer/.env", 
    "--device=/dev/ppp", "--cap-add=NET_ADMIN", "--cap-add=NET_RAW"
  ],
  "remoteEnv": {
    "DOCKER_HOST": "unix:///var/run/dind/docker.sock"
  },
  "overrideCommand": false,
  "postStartCommand": "/usr/local/bin/setup-ssh.sh",
  "customizations": {
    "jetbrains": {
      "backend": "intellij"
    }
  }
}
